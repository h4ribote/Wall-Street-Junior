# AI Traders & Bot Ecosystem

## 1. リアルタイム要素とボット (Real-time & Bots)
Paper Street では、実際の市場と同様に、取引の大半はボットが担います。これにより、プレイヤーが常にリアルな価格変動と流動性（Order Bookの厚み）を感じられる環境を提供します。

### 1.1. ボットの役割 (Bot Roles)
板情報（Order Book）は、プレイヤーだけでなく、以下の多様なロジックを持つボット群によって駆動されます。

1.  **Market Makers (流動性供給)**:
    *   常に現在価格の上下にBuy/Sellの指値注文を出し続け、スプレッド（売値と買値の差）を維持します。
    *   市場に厚みを持たせ、プレイヤーがいつでも売買できるようにします。
2.  **Trend Followers (順張り)**:
    *   移動平均線などのテクニカル指標を監視し、トレンドが発生した方向に追随して注文を出します。
    *   相場の「勢い」を作り出します。
3.  **Mean Reverters (逆張り)**:
    *   RSIなどで「買われすぎ/売られすぎ」を判断し、過熱した相場の是正（反転）を狙います。
4.  **Whales / Institutional (機関投資家)**:
    *   膨大な資金を持ち、定期的に大量の注文（実需）を執行します。
    *   アイスバーグ注文（見せ板隠し）なども使用し、市場にインパクトを与えるイベント的な存在です。
5.  **News Reactors (ヘッドライン取引)**:
    *   ゲーム内のニュースフィードに反応し、ミリ秒単位で「ポジティブなら買い」「ネガティブなら売り」を行うHFT（高頻度取引）ボットです。
6.  **National AI (中央銀行/国家介入)**:
    *   [ECONOMY.md](./ECONOMY.md) で定義された国家の市場介入を実行する特別なボットです。
    *   マクロ経済指標や市場の健全性（ボラティリティ、流動性）を監視し、必要に応じて大規模な買い支えや売り浴びせを行います。

---

## 2. Botの挙動改善と脆弱性対策 (Bot Intelligence)
単純なアルゴリズムBotはプレイヤーに見切られ、搾取されるリスクがあります。これを防ぐため、高度なロジックと多様性を導入します。

### 2.1. アルゴリズムの多様化と隠蔽 (Diversity & Obfuscation)
*   **パラメータのランダム化**: Botごとに使用するテクニカル指標のパラメーター（期間、閾値など）を微妙にズラし、行動のタイミングを分散させます。
*   **反応遅延 (Jitter)**: ニュースやシグナルに対する反応速度にランダムな遅延を持たせ、機械的な動きを隠蔽します。これにより、プレイヤーがBotの動きを完全に予測することを難しくします。

### 2.2. 適応 (Learning & Adaptation)
*   **適応的パラメータ調整 (Adaptive Parameters)**: 「過去一定期間に損失を出した戦略」の重みを一時的に下げるロジックを実装し、単純な攻略法への耐性を高めます。
*   **「噂」と「事実」の区別**: ニュース発表前に、一部のBotが「噂で買って事実で売る」動きをするように設定し、ニュース＝即買いという単純な攻略法を封じます。
*   **誤報への反応**: たまにsentimentと逆の価格変動を起こす（材料出尽くし、または誤報）イベントを混ぜ、プレイヤーの裏をかく動きを見せます。

---

## 3. ボットロジックの詳細 (Bot Logic Details)

### 3.1. Market Maker Logic (マーケットメイカー)
*   **目的**: 流動性の供給とスプレッドからの収益確保。
*   **挙動**:
    *   中間価格（Mid-price）の上下に指値の買い注文と売り注文を出します。
    *   **在庫リスク管理 (Inventory Risk Management)**: 現在の在庫状況に基づいて提示価格を調整します。ロングポジションを持ちすぎている場合は、買いと売りの価格を両方下げて、売りを促進し買いを抑制します。
    *   **スプレッド計算 (Spread Calculation)**: `スプレッド = 基本スプレッド * (1 + ボラティリティ乗数)`。ボラティリティが高い時はスプレッドを広げます。
    *   **注文更新 (Order Refresh)**: 定期的、または価格が大きく変動した際に、注文をキャンセルして再発注します。

### 3.2. Trend Follower Logic (トレンドフォロワー)
*   **目的**: 方向性のある価格変動（トレンド）からの利益獲得。
*   **指標**: 移動平均線 (SMA/EMA)、MACD、ボリンジャーバンド。
*   **挙動**:
    *   **エントリー**: 短期MAが長期MAを上抜けた場合（ゴールデンクロス）、または価格が抵抗線をブレイクした場合に買います。デッドクロスや支持線割れで売ります。
    *   **エグジット**: トレーリングストップ、または反転シグナルで決済します。
    *   **時間枠**: ボットのインスタンスごとに異なります（例: 1分、5分、15分のトレンド）。

### 3.3. Mean Reverter Logic (ミーンリバーター)
*   **目的**: 価格の調整局面（リバウンド）からの利益獲得。
*   **指標**: RSI、ボリンジャーバンド、ストキャスティクス。
*   **挙動**:
    *   **エントリー**: RSI < 30（売られすぎ）または価格がボリンジャーバンド下限に触れた場合に買います。RSI > 70（買われすぎ）または価格がボリンジャーバンド上限に触れた場合に売ります。
    *   **エグジット**: 価格が平均（例: SMA）に戻った場合、または逆のシグナルが出た場合に決済します。
    *   **リスク**: 強いトレンド相場に備え、タイトなストップロスを使用します。

### 3.4. Whale / Institutional Logic (クジラ / 機関投資家)
*   **目的**: 市場への影響を最小限に抑えて大口注文を執行する、または価格を操作する。
*   **挙動**:
    *   **TWAP/VWAP**: 大口注文を時間の経過とともに平均価格に合わせて小さな塊に分割して執行します。
    *   **アイスバーグ注文 (Iceberg Orders)**: 大きな指値注文を出しますが、オーダーブックにはそのごく一部しか表示しません。
    *   **インパクト**: 時折、流動性を一掃しストップロスを誘発するために、大きな成行注文を実行します（ストップ狩り）。

### 3.5. News Reactor Logic (ニュースリアクター)
*   **目的**: ニュースのセンチメントに基づいて即座に取引する。
*   **挙動**:
    *   ニュースの見出しからキーワードとセンチメントスコア（ポジティブ/ネガティブ）を解析します。
    *   **反応関数**: `取引サイズ = 基本サイズ * センチメントスコア * 確信度`。
    *   **速度**: ニュース発表から数ミリ秒以内に反応します。
    *   **フェード (Fading)**: 一部のリアクターは、初期のスパイク（過剰反応）後の戻りを予測して、逆張りを行う場合があります。

### 3.6. National AI (Central Bank) Logic (国家AI / 中央銀行)
*   **目的**: 経済の安定維持または政策の実施。
*   **挙動**:
    *   **介入 (Intervention)**: 資産クラスが臨界閾値（支持レベル）を下回った場合に購入します。
    *   **利上げ/利下げ**: グローバルな流動性パラメータに影響を与える金利変更をシミュレートします。
    *   **ペッグ維持**: 通貨がペッグされている場合、レートを狭い帯域内に保つために積極的に取引します。
